#!/bin/sh
# Synchronize thailatex with tetex files
# Written by Theppitak Karoonboonyanan <thep@linux.thai.net>
# License: GPL

prefix=@prefix@

@UPDMAP@ --enable Map thai.map

# patch babel if thai.ldf exists
BABELSTY=@texmfdir@/tex/generic/babel/babel.sty
if ! grep thai.ldf $BABELSTY >/dev/null; then
  if test -f @texmfdir@/tex/generic/babel/thai.ldf; then
    sed '/turkish/i\
\\DeclareOption{thai}{\\input{thai.ldf}}' $BABELSTY >/tmp/tmp.$$
    mv -f /tmp/tmp.$$ $BABELSTY
  fi
fi


@TEXHASH@

# add Emacs macro for activating Thai LaTeX filter
EMACSLISPDIR=@emacsdir@/site-lisp
if test -f $EMACSLISPDIR/site-start.el; then
  sed -e '/thai-latex-setup/d' $EMACSLISPDIR/site-start.el > /tmp/tmp.$$
  mv /tmp/tmp.$$ $EMACSLISPDIR/site-start.el
fi
if test -f $EMACSLISPDIR/thai-latex-setup.el; then
  echo '(load-library "thai-latex-setup")' >> $EMACSLISPDIR/site-start.el
fi

